- type: entity
  id: GasGenerator
  name: gas generator
  description: A combustion-based generator that consumes fuel gas mixtures to produce electricity. Efficiency depends on fuel composition and temperature.
  parent: [ BaseMachinePowered, ConstructibleMachine ]
  placement:
    mode: SnapgridCenter
  components:
    - type: Transform
      noRot: false
    - type: Sprite
      sprite: Structures/Power/Generation/gas_generator.rsi
      layers:
        - sprite: Structures/Piping/Atmospherics/pipe.rsi
          state: pipeUnaryConnectors
          map: [ "enum.PipeVisualLayers.Pipe" ]
        - state: gas_gen_idle
          visible: true
          map: [ "idle" ]
        - state: gas_gen_active
          visible: false
          map: [ "active" ]
    - type: GenericVisualizer
      visuals:
        enum.PowerDeviceVisuals.Powered:
          active:
            True: { visible: true }
            False: { visible: false }
          idle:
            True: { visible: false }
            False: { visible: true }
    - type: PipeColorVisuals
    - type: Rotatable
    - type: Anchorable
    - type: Pullable
    - type: Machine
      board: GasGeneratorMachineCircuitboard
    - type: NodeContainer
      examinable: true
      nodes:
        inlet:
          !type:PipeNode
          nodeGroupID: Pipe
          pipeDirection: South
          volume: 1
        output:
          !type:CableDeviceNode
          nodeGroupID: HVPower
    - type: PowerMonitoringDevice
      group: Generator
      sourceNode: output
      sprite: Structures/Power/Generation/gas_generator.rsi
      state: gas_gen_idle
    - type: PowerSupplier
    - type: GasGenerator
      inputGas1: Methane
      inputGas2: Oxygen
      inputGas1Ratio: 1.0
      inputGas2Ratio: 2.0
      wasteGas1: WaterVapor
      wasteGas2: CarbonDioxide
      fuelEfficiency: 0.9
      fuelSlipRate: 0.1
      wasteGas1Ratio: 2.0
      wasteGas2Ratio: 1.0
      maxOutput: 100000
      maxFuelConsumptionRate: 10.0
      maxInternalPressure: 150      # kPa - realistic for small methane engines
      internalVolume: 200            # liters - combustion chamber volume
      maxInletFlowRate: 2.0          # moles/sec - internal pump capacity
      optimalInputRatio: 0.8
      minimumTemperature: 373.15
      optimalTemperature: 573.15
      maximumTemperature: 1273.15
    - type: Appearance
    - type: ApcPowerReceiver
      powerLoad: 500
      needsPower: true
    - type: AtmosDevice
    - type: AmbientSound
      volume: -6
      range: 8
      enabled: false
      sound:
        path: /Audio/Ambience/Objects/gravity_gen_hum.ogg
